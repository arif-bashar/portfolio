import React, {
  useRef,
  useEffect,
  useState,
  useMemo,
  SetStateAction,
} from "react";
import gsap from "gsap";
import { Transition } from "react-transition-group";
import Hello from "../Hello";

type SlideProps = {
  currentSlide: number;
};

function oldcode(props: SlideProps) {
  let nameRef = useRef<HTMLDivElement>(null);
  let helloRef = useRef<SVGSVGElement | null>(null);
  let pathRef = useRef<SVGPathElement | null>(null);
  const [animStatus, setAnimStatus] = useState("pause");
  const scaleHelloTL = useMemo(() => gsap.timeline({ paused: true }), []);

  let isScrolling: NodeJS.Timeout;

  // Calls name entrance animation after page load
  useEffect(() => {
    // if (!props.revealed) animateName();
  }, []);

  const wheelHandler = (event: WheelEvent) => {
    window.clearTimeout(isScrolling);

    console.log(event.deltaY);
    if (event.deltaY > 0) {
      setAnimStatus("play");
      // setCurrentSlide(1);
      // if (!nameRevealed) setNamedRevealed(true);
    } else if (event.deltaY < 0) {
      setAnimStatus("reverse");
      // setCurrentSlide(0);
    }

    isScrolling = setTimeout(() => {
      // setAnimStatus("play");
    }, 66);
  };

  useEffect(() => {
    window.addEventListener("wheel", wheelHandler, { passive: false });

    return () => {
      window.removeEventListener("wheel", wheelHandler);
    };
  }, []);

  useEffect(() => {
    gsap.set(helloRef.current, {
      attr: {
        width: 620,
        height: 300,
        viewBox: "-20 0 144 41",
      },
    });
    scaleHelloTL.to(helloRef.current, {
      ease: "power3.easeOut",
      attr: {
        width: 920,
        height: 165,
        viewBox: "0 0 620 165"
      }
    }).to(nameRef.current, {
      ease: "power3.easeOut",
      height: 300,
    }, 0)
    .to(nameRef.current, {
      background: "transparent"
    }).to(".sliding-bg", {
      duration: 1,
      ease: "back.out(1.7)",
      scaleX: 0
    }, "+=0.2").to(helloRef.current, {
      duration: 0.5,
      ease: "power3.easeOut",
      attr: {
        viewBox: "0 160 620 165"
      }
    }, "+=0.2")
    // scaleHelloTL.from()
    // scaleHelloTL.from(".top-title", {
    //   scale: 10,
    //   left: '50%',
    //   xPercent: -50,
    //   ease: "power3.easeOut",
    //   onComplete: () => {
    //     props.setRevealed(true);
    //   },
    // });
  }, []);

  useEffect(() => {
    if (animStatus == "play") scaleHelloTL.play();
    else if (animStatus == "reverse") scaleHelloTL.reverse();
    else if (animStatus == "pause") scaleHelloTL.pause();
  }, [animStatus]);

  // Name moves in direction of mouse
  const moveNameonMouse = (
    event: React.MouseEvent,
    nameNode: React.RefObject<HTMLDivElement>
  ) => {
    let x = event.clientX / window.innerWidth - 0.5;
    let y = event.clientY / window.innerHeight - 0.5;

    gsap.to(nameNode.current, 0.6, {
      x: x * 30,
      y: y * 30,
      ease: "power4.easeOut",
    });
  };

  return (
    <div
      className="welcome-section"
      onMouseMove={event => moveNameonMouse(event, nameRef)}
    >
      <div ref={nameRef} className="name-title">
        <svg
          ref={helloRef}
          width="620"
          height="165"
          viewBox="0 0 620 165"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M118.848 135L113.721 120.449L84.082 120.449L78.9551 135H63.9648L89.9414 64.4434H107.861L133.838 135H118.848ZM88.3789 108.193L109.424 108.193L98.9258 78.2617L88.3789 108.193ZM156.104 92.7637C157.438 90.4199 159.635 88.418 162.695 86.7578C165.755 85.0651 169.027 84.2188 172.51 84.2188V96.7676C166.976 96.7676 162.972 97.7767 160.498 99.7949C158.024 101.813 156.787 105.394 156.787 110.537V135H142.627V84.8047H156.104V92.7637ZM187.988 77.2852C185.742 77.2852 183.822 76.5039 182.227 74.9414C180.632 73.3464 179.834 71.4258 179.834 69.1797C179.834 66.9661 180.632 65.0781 182.227 63.5156C183.854 61.9206 185.775 61.123 187.988 61.123C190.169 61.123 192.057 61.9206 193.652 63.5156C195.247 65.0781 196.045 66.9661 196.045 69.1797C196.045 71.4258 195.247 73.3464 193.652 74.9414C192.057 76.5039 190.169 77.2852 187.988 77.2852ZM180.811 135V84.8047H194.971L194.971 135H180.811ZM237.842 71.2305C237.777 71.2305 237.679 71.2305 237.549 71.2305C236.637 71.2305 235.938 71.2467 235.449 71.2793C234.993 71.2793 234.326 71.3281 233.447 71.4258C232.601 71.5234 231.934 71.6699 231.445 71.8652C230.957 72.0605 230.387 72.3698 229.736 72.793C229.118 73.1836 228.63 73.6719 228.271 74.2578C227.946 74.8112 227.653 75.5273 227.393 76.4063C227.165 77.2852 227.051 78.2943 227.051 79.4336V84.8047H237.842V95.5957H227.051L227.051 135H213.037L213.037 95.5957H203.223V84.8047H213.037V79.3848C213.037 77.0085 213.249 74.8763 213.672 72.9883C214.095 71.1003 214.665 69.4889 215.381 68.1543C216.097 66.7871 217.041 65.6152 218.213 64.6387C219.417 63.6621 220.654 62.8809 221.924 62.2949C223.226 61.709 224.772 61.237 226.562 60.8789C228.353 60.5208 230.111 60.293 231.836 60.1953C233.594 60.0651 235.596 60 237.842 60V71.2305ZM311.572 97.7441C320.426 100.186 324.854 106.012 324.854 115.225C324.854 121.344 322.982 126.178 319.238 129.727C315.495 133.242 309.993 135 302.734 135L273.682 135V64.4434L296.533 64.4434C304.053 64.4434 309.798 66.1523 313.77 69.5703C317.773 72.9557 319.775 77.6921 319.775 83.7793C319.775 86.9368 319.076 89.7363 317.676 92.1777C316.309 94.5866 314.274 96.4421 311.572 97.7441ZM296.68 76.6016H287.793V93.2031H297.314C300.309 93.2031 302.555 92.4219 304.053 90.8594C305.55 89.2969 306.299 87.2461 306.299 84.707C306.299 82.2656 305.485 80.3125 303.857 78.8477C302.23 77.3503 299.837 76.6016 296.68 76.6016ZM300 122.451C303.678 122.451 306.364 121.621 308.057 119.961C309.782 118.301 310.645 116.185 310.645 113.613C310.645 110.977 309.782 108.796 308.057 107.07C306.331 105.345 303.548 104.482 299.707 104.482H287.793V122.451H300ZM377.246 121.377C377.246 126.715 377.653 130.801 378.467 133.633V135H365.332L364.209 129.531C362.419 131.68 360.075 133.291 357.178 134.365C354.281 135.439 351.253 135.977 348.096 135.977C346.436 135.977 344.873 135.83 343.408 135.537C341.943 135.244 340.527 134.756 339.16 134.072C337.826 133.356 336.67 132.477 335.693 131.436C334.717 130.394 333.936 129.076 333.35 127.48C332.764 125.853 332.471 124.03 332.471 122.012C332.471 119.993 332.78 118.187 333.398 116.592C334.017 114.964 334.831 113.597 335.84 112.49C336.849 111.383 338.167 110.391 339.795 109.512C341.423 108.633 343.083 107.917 344.775 107.363C346.468 106.81 348.454 106.289 350.732 105.801L358.984 103.945C360.742 103.522 361.979 103.001 362.695 102.383C363.444 101.732 363.818 100.885 363.818 99.8438C363.818 97.5977 362.988 95.9863 361.328 95.0098C359.701 94.0332 357.715 93.5449 355.371 93.5449C349.609 93.5449 346.338 96.1003 345.557 101.211L333.105 98.9648C334.147 93.7891 336.572 89.9805 340.381 87.5391C344.189 85.0651 349.447 83.8281 356.152 83.8281C370.215 83.8281 377.246 89.8665 377.246 101.943V121.377ZM352.49 126.455C356.038 126.455 358.936 125.251 361.182 122.842C363.428 120.4 364.551 116.803 364.551 112.051L352.637 115.42C350.456 115.941 348.779 116.624 347.607 117.471C346.468 118.317 345.898 119.521 345.898 121.084C345.898 122.809 346.517 124.144 347.754 125.088C348.991 125.999 350.57 126.455 352.49 126.455ZM408.643 135.977C402.783 135.977 397.9 134.805 393.994 132.461C390.088 130.117 387.695 126.634 386.816 122.012L398.584 118.691C399.984 123.672 403.337 126.162 408.643 126.162C410.693 126.162 412.402 125.788 413.77 125.039C415.137 124.258 415.804 122.956 415.771 121.133C415.771 120.124 415.495 119.261 414.941 118.545C414.388 117.829 413.525 117.21 412.354 116.689C411.214 116.169 410.075 115.729 408.936 115.371C407.829 115.013 406.348 114.59 404.492 114.102C402.637 113.581 401.09 113.092 399.854 112.637C398.161 112.051 396.68 111.432 395.41 110.781C394.173 110.098 392.952 109.235 391.748 108.193C390.576 107.119 389.665 105.801 389.014 104.238C388.395 102.676 388.086 100.885 388.086 98.8672C388.086 93.9193 389.893 90.1758 393.506 87.6367C397.152 85.0977 401.904 83.8281 407.764 83.8281C412.972 83.8281 417.35 84.9023 420.898 87.0508C424.447 89.1992 426.693 92.5521 427.637 97.1094L416.748 99.5508C415.381 95.319 412.402 93.2031 407.812 93.2031C405.827 93.2031 404.183 93.5775 402.881 94.3262C401.579 95.0749 400.928 96.1816 400.928 97.6465C400.928 98.1999 401.025 98.7044 401.221 99.1602C401.416 99.6159 401.758 100.023 402.246 100.381C402.734 100.739 403.206 101.048 403.662 101.309C404.118 101.569 404.785 101.846 405.664 102.139C406.543 102.399 407.275 102.611 407.861 102.773C408.447 102.904 409.294 103.115 410.4 103.408C411.54 103.701 412.419 103.929 413.037 104.092C414.827 104.58 416.39 105.068 417.725 105.557C419.092 106.045 420.54 106.729 422.07 107.607C423.6 108.486 424.854 109.479 425.83 110.586C426.839 111.66 427.669 113.044 428.32 114.736C428.971 116.396 429.297 118.252 429.297 120.303C429.297 123.07 428.727 125.495 427.588 127.578C426.481 129.661 424.951 131.305 422.998 132.51C421.045 133.682 418.864 134.544 416.455 135.098C414.079 135.684 411.475 135.977 408.643 135.977ZM469.775 83.8281C475.472 83.8281 479.883 85.4232 483.008 88.6133C486.165 91.7708 487.744 96.4421 487.744 102.627V135H473.633V104.922C473.633 101.471 472.803 98.9811 471.143 97.4512C469.482 95.8887 467.269 95.1074 464.502 95.1074C463.102 95.1074 461.784 95.3027 460.547 95.6934C459.342 96.084 458.187 96.7188 457.08 97.5977C455.973 98.444 455.094 99.6973 454.443 101.357C453.825 103.018 453.499 105.003 453.467 107.314V135H439.404V60L453.467 60V90.8105C457.275 86.1556 462.712 83.8281 469.775 83.8281ZM542.48 121.377C542.48 126.715 542.887 130.801 543.701 133.633V135H530.566L529.443 129.531C527.653 131.68 525.309 133.291 522.412 134.365C519.515 135.439 516.488 135.977 513.33 135.977C511.67 135.977 510.107 135.83 508.643 135.537C507.178 135.244 505.762 134.756 504.395 134.072C503.06 133.356 501.904 132.477 500.928 131.436C499.951 130.394 499.17 129.076 498.584 127.48C497.998 125.853 497.705 124.03 497.705 122.012C497.705 119.993 498.014 118.187 498.633 116.592C499.251 114.964 500.065 113.597 501.074 112.49C502.083 111.383 503.402 110.391 505.029 109.512C506.657 108.633 508.317 107.917 510.01 107.363C511.702 106.81 513.688 106.289 515.967 105.801L524.219 103.945C525.977 103.522 527.214 103.001 527.93 102.383C528.678 101.732 529.053 100.885 529.053 99.8438C529.053 97.5977 528.223 95.9863 526.562 95.0098C524.935 94.0332 522.949 93.5449 520.605 93.5449C514.844 93.5449 511.572 96.1003 510.791 101.211L498.34 98.9648C499.382 93.7891 501.807 89.9805 505.615 87.5391C509.424 85.0651 514.681 83.8281 521.387 83.8281C535.449 83.8281 542.48 89.8665 542.48 101.943V121.377ZM517.725 126.455C521.273 126.455 524.17 125.251 526.416 122.842C528.662 120.4 529.785 116.803 529.785 112.051L517.871 115.42C515.69 115.941 514.014 116.624 512.842 117.471C511.702 118.317 511.133 119.521 511.133 121.084C511.133 122.809 511.751 124.144 512.988 125.088C514.225 125.999 515.804 126.455 517.725 126.455ZM569.678 92.7637C571.012 90.4199 573.21 88.418 576.27 86.7578C579.329 85.0651 582.601 84.2188 586.084 84.2188V96.7676C580.55 96.7676 576.546 97.7767 574.072 99.7949C571.598 101.813 570.361 105.394 570.361 110.537V135H556.201V84.8047H569.678V92.7637ZM603.174 135.977C600.993 135.977 599.105 135.195 597.51 133.633C595.947 132.038 595.166 130.15 595.166 127.969C595.166 125.755 595.947 123.851 597.51 122.256C599.105 120.661 600.993 119.863 603.174 119.863C605.387 119.863 607.292 120.661 608.887 122.256C610.482 123.851 611.279 125.755 611.279 127.969C611.279 130.15 610.482 132.038 608.887 133.633C607.292 135.195 605.387 135.977 603.174 135.977Z"
            fill="#398992"
          />
          <path
            d="M21.4453 10.7773H27.3047L27.3047 39L21.4453 39L21.4453 27.3984L9.51172 27.3984L9.51172 39H3.65234L3.65234 10.7773L9.51172 10.7773L9.51172 22.3008L21.4453 22.3008L21.4453 10.7773ZM52.6562 28.668L52.5977 30.0156H37.7148C37.832 31.6172 38.3659 32.8411 39.3164 33.6875C40.2669 34.5339 41.4453 34.957 42.8516 34.957C43.8672 34.957 44.7461 34.7292 45.4883 34.2734C46.2435 33.8047 46.8099 33.1276 47.1875 32.2422L52.3437 33.0039C51.6797 35.0221 50.5078 36.5911 48.8281 37.7109C47.1484 38.8307 45.1693 39.3906 42.8906 39.3906C39.6094 39.3906 36.9987 38.4727 35.0586 36.6367C33.1315 34.7878 32.168 32.2292 32.168 28.9609C32.168 25.7188 33.138 23.1667 35.0781 21.3047C37.0182 19.4297 39.5638 18.4922 42.7148 18.4922C45.7096 18.4922 48.112 19.3451 49.9219 21.0508C51.7318 22.7565 52.6432 25.2956 52.6562 28.668ZM42.7539 22.4766C40.0195 22.4766 38.3919 23.7656 37.8711 26.3438H47.0898C46.9466 25.0938 46.4844 24.1367 45.7031 23.4727C44.9219 22.8086 43.9388 22.4766 42.7539 22.4766ZM56.9336 39L56.9336 9L62.6172 9L62.6172 39H56.9336ZM68.457 39V9L74.1406 9V39H68.457ZM89.3359 39.3906C87.2005 39.3906 85.306 38.9805 83.6523 38.1602C81.9987 37.3398 80.6966 36.1354 79.7461 34.5469C78.8086 32.9583 78.3398 31.0898 78.3398 28.9414C78.3398 25.7253 79.3555 23.1862 81.3867 21.3242C83.418 19.4622 86.0677 18.5313 89.3359 18.5313C92.6172 18.5313 95.2734 19.4622 97.3047 21.3242C99.3359 23.1862 100.352 25.7253 100.352 28.9414C100.352 32.1706 99.3359 34.7227 97.3047 36.5977C95.2734 38.4596 92.6172 39.3906 89.3359 39.3906ZM89.2773 34.918C90.918 34.918 92.2396 34.3711 93.2422 33.2773C94.2578 32.1836 94.7656 30.7383 94.7656 28.9414C94.7656 27.1445 94.2578 25.6992 93.2422 24.6055C92.2396 23.5117 90.918 22.9648 89.2773 22.9648C87.7018 22.9648 86.4128 23.5182 85.4102 24.625C84.4206 25.7188 83.9258 27.1576 83.9258 28.9414C83.9258 30.7253 84.4206 32.1706 85.4102 33.2773C86.4128 34.3711 87.7018 34.918 89.2773 34.918ZM106.504 46.1875H102.48L104.922 33.4141L110.703 33.4141L106.504 46.1875ZM3.65234 90L3.65234 61.7773H9.51172L9.51172 90H3.65234ZM19.4336 74.5312H15.4102L17.8516 61.7578L23.6328 61.7578L19.4336 74.5312ZM51.8164 69.5313C54.0039 69.5313 55.7292 70.0781 56.9922 71.1719C58.2552 72.2526 58.8867 73.8086 58.8867 75.8398V90H53.2617V77.4414C53.2617 76.3216 52.9622 75.4753 52.3633 74.9023C51.7643 74.3294 51.0091 74.043 50.0977 74.043C48.9779 74.043 48.0664 74.4076 47.3633 75.1367C46.6602 75.8659 46.3086 77.0443 46.3086 78.6719V90L40.625 90V77.5C40.625 76.3542 40.3255 75.4948 39.7266 74.9219C39.1276 74.3359 38.3529 74.043 37.4023 74.043C36.2956 74.043 35.3906 74.4271 34.6875 75.1953C33.9844 75.9635 33.6328 77.2201 33.6328 78.9648V90H28.0273L28.0273 69.9219H33.6328V72.2852C35 70.4492 36.9401 69.5312 39.4531 69.5312C40.9115 69.5312 42.168 69.7917 43.2227 70.3125C44.2904 70.8203 45.0846 71.5625 45.6055 72.5391C47.0117 70.5339 49.082 69.5313 51.8164 69.5313Z"
            fill="#398992"
          />
        </svg>
      </div>
    </div>
  );
}

export default oldcode;
